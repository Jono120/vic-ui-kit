/*==================================================
=                     FOOTERS                      =
==================================================*/


/** PRIMARY FOOTER (dark one), usually placed on the very end of
    the page. 1 *MUST BE* used on a single page. */

$footer-logo-width:         20% !default;
$footer-logo-max-width:     15.5rem;
$footer-primary-background: $black-brand !default;
$footer-primary-color:      $grey-silver !default;
$footer-primary-separator:  1px solid $black-emperor !default;


.footer-primary .block {
  @include clearfix;

  @include breakpoint( tablet ) {
    display: flex;
  }
}



.footer-primary,
.page-sub-nav { // TODO: Refactor!
  background-color: $footer-primary-background;
  color:            $footer-primary-color;

  //TODO: Should be refactored to include underlines (currently, it's not clear these are links)
  ul {
    &,
    > li {
      display: inline-block;
    }

    > li { margin: 0 .35em; }

    a {
      text-decoration: none;
      border-bottom: 0;
      color: inherit;

      @include hoverify() {
        text-decoration: underline;

        img { text-decoration: none; }
      }
    }
  }

  .block {
    + .block {
      @include clearfix();
      border-top: $footer-primary-separator;
    }

    &.small { padding-top: 1em; }
  }

  // Logo & Contact info
  .logo {
    float: left;
    width: 25%;
    align-self: center;
    vertical-align: middle;

    img {
      display: inline-block;
      width: 100%;
      max-width: $footer-logo-max-width;
      vertical-align: middle;
    }
  }

  .contacts {
    float: left;
    padding: .5em 0 .5em 3.5em;
    width: 75%;
    vertical-align: middle;

    > li:last-child { margin-right: 0; }
    > li:first-child { margin-left: 0; }

    a {
      color: $white;
      font-weight: $weight-bold;
    }
  }


  // Foot-note like mini-menu + copyright at the end of the footer
  .small > * { font-size: .9em; }

  .copyright {
    float: right;
    display: block;
    flex-grow: 1;
    text-align: right;
  }

  .minilinks {
    float: left;

    > li {
      &:first-child { margin-left: 0; }
    }

    a {
      text-decoration: underline;

      @include hoverify { text-decoration: none; }
    }
  }

  @include breakpoint( $until: tablet ) {
    text-align: center;

    .contacts,
    .logo {
      // Re-use this
      float: none;
      display: block;
      width: 100%;
    }

    .contacts { padding-left: 0; }

    .copyright,
    .minilinks {
      float: none;
    }

    .copyright {
      margin-top: .75em;
      text-align: inherit;
    }

    .logo { margin-bottom: .5em; }
  }
}


/** SECONDARY FOOTER (light one), usually before the primary footer. 0-many CAN be used on a single page. */

$footer-secondary-background: $grey-alto !default;
$footer-secondary-separator:  1px solid $grey-silver !default;
$footer-secondary-color:      $text-color !default;
$footer-heading-margin-bottom: .75em;

.footer-secondary {
  background-color: $footer-secondary-background;

  h2 {
    line-height: 1.3;
    font-size: $h5-size; // ~ stadard <h4>'s size
  }

  nav ul {
    a {
      font-family: $heading-family;
      font-size: 1.125em;
      border-color: $footer-secondary-color;
      text-decoration: underline;

      @include hoverify() {
        border-bottom: 0;
        text-decoration: none;
      }
    }
  }

  ul {
    a { color: inherit; }
  }

  + .footer-secondary,
  .block + .block {
    border-top: $footer-secondary-separator;
  }

  // One block alone
  &:not(.two-columns) {
    h2 {
      float: left;
      margin-right: 2em;
    }

    // Stretches all the links to rest of the available width
    nav ul {
      display: flex;
      align-items: stretch;
      justify-content: flex-start;
      flex-wrap: wrap;
      flex-direction: row;

      > li { margin-right: 1.5em; }
    }

    .contacts {
      ul {
        &,
        > li {
          display: inline-block;
          margin-right: .75em;
        }
      }
    }
  }

  .contacts {
    address {
      font-style: inherit;
      color: $black-emperor;

      a {
        margin-right: .35em;
        color: $footer-secondary-color;
        font-weight: $weight-medium;
        border-bottom: 0;
        text-decoration: underline;

        @include hoverify() { text-decoration: none; }
      }

      ul {

        // Icons setup
        &::before {
          position: absolute;
          margin-left: -1.6rem;
          line-height: 1.4;
          font-size: 115%;
        }
      }
    }
  }

  // Contact-types
  .phones,
  .mails {
    position: relative;
    padding-left: 1.6rem;
  }

  .phones {
    @include extend-icon-before( phone );
  }

  .mails {
    @include extend-icon-before( mail );
  }


  // Two blocks next to each other
  &.two-columns {
    h2 { margin-bottom: $footer-heading-margin-bottom; }

    .block {
      @include column( 2 );

      &:first-child {
        padding-right: $base-spacing;
        //width: 10000px; // Correct widths hack
      }
    }

    // Turn links list into 2-columns to conserve space
    nav ul {
      overflow: hidden;

      li {
        float: left;
        display: block;
        margin-right: 2%;
        width: 48%;
      }
    }

    ul {
      margin-bottom: .8em;

      > li { margin: 0 0 .35em; }

      &:last-child { margin-bottom: 0; }
    }
  }

  @include breakpoint( tablet ) {

    &.two-columns {
      .block {

        &:last-child {
          padding-left: $base-spacing;
          border-top: 0;

          @include before( $position: absolute ) {
            @include size( 0, 100% );
            top: 0;
            left: calc( 50% - #{ 1px / 2 } );
            border-left: $footer-secondary-separator;
          }
        }
      }
    }
  }

  @include breakpoint( $until: tablet ) {
    &:not( .two-columns ) {
      h2 {
        float: none;
        margin-bottom: $footer-heading-margin-bottom;
      }
    }

    &.two-columns {
      .block {
        //TODO: Reuse
        float: none;
        display: block;
        width: 100%;

        &:first-child { width: auto; }

        &:last-child {
          padding-top: $base-spacing;
          border-top: $footer-secondary-separator;
        }
      }

      nav ul {
        > li {
          float: none;
          width: auto;
        }
      }
    }

  }
}
