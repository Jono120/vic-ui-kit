/** General fixed popup. */

$popup-width:              24rem;
$popup-button-close-color: $black-tundora;

/* Positions popup within a page. */
.popup-positioner {
  @include position(0, null, auto, null, fixed);
  z-index: $z-index-max;
  display: none;
  margin: 0;
  width: 100%;

  @include breakpoint( $from: tablet) {
    @include position(auto, null, 0, null, fixed);
    margin: $gap-larger;
    width: $popup-width;
  }

  &.shown { display: block; }
}

.popup {
  @include breakpoint( $until: tablet ) {
    margin: 0; // TM: Not sure why this is set.. in theory it'd be zero by default??
  }
  
  display: none;
  padding: $gap;
  background-color: $grey-gallery;
  box-shadow: $shadow;

  .shown &,
  &.shown {
    display: block;
  }

  > header {
    //.caption {}

    // 'x' button
    .btn-close {
      @include illuminate-on-hover;

      float: right;
      display: block;
      margin: $gap-tiny $gap-small;
      padding: 0 $gap-small;
      color: $popup-button-close-color;
      
      font-size: 170%;
      line-height: 1;
    }

    &:not(:last-child) { margin-bottom: $gap-content; }
  }

  .body {
    // Remove the icon
    .button:not(.primary)::after { display: none; }
  }

  .btn-holder {
    .btn { margin: 0; }
  }
}



/** TOOLTIPS */

$tooltip-bg:            $black-brand;
$tooltip-caret-size:    20px;


.tooltip {
  z-index: $z-index-max;
  position: absolute;
  padding: $gap-half;
  max-width: 400px;
  font-size: 90%;
  text-align: center;
  color: $white;
  background: $tooltip-bg;
  transition: opacity .2s ease-in-out;

  &[hidden] { opacity: 0; }

  /* Tooltip's `tip` */

  // Bottom position (default)
  @include after( $position: absolute ) {
    @include size ( 0 );
    left: 50%;
    margin-left: -1 * $tooltip-caret-size;
  }

  // Positions
  &.bottom {
    &::after {
      @include triangle( 'down', $tooltip-caret-size, $tooltip-caret-size / 2, $tooltip-bg );
      top: auto;
      bottom: -1 / 2 * $tooltip-caret-size + 1;
    }
  }

  &.top {
    &::after {
      @include triangle( 'up', $tooltip-caret-size, $tooltip-caret-size / 2, $tooltip-bg );
      top: -1 / 2 * $tooltip-caret-size + 1;
      bottom: auto;
    }
  }

  &.left {
    &::after {
      left: 10px;
      margin: 0;
    }
  }

  &.right {
    &::after {
      right: 10px;
      left: auto;
      margin: 0;
    }
  }
}

// Tooltip, that can be popped up by clicking on the trigger element
.tooltip-popup { cursor: pointer; }

