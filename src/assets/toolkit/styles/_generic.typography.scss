
  /* ===== MIXINS =========================================================== */


  $scale-font-base: $base-font-size !default;

  @function scale-font( $font-size: 1 ) {
    @return pow( $modular-scale, $font-size ) * $base-font-size;
  }


  $heading-to-body-ratio: $base-heading-to-body-ratio !default;

  @function scale-heading( $heading-size ) {
    @return scale-font( $heading-size ) / $heading-to-body-ratio;
  }





  /* ===== DEFINE & IMPORT FONTS ============================================ */


  /* Victoria's font `National` */
  @include font-face( $font-victoria, "#{$font-path-victoria}-Regular", $weight-normal, $file-formats: $font-supported-formats );
  @include font-face( $font-victoria, "#{$font-path-victoria}-Semibold", $weight-semibold, $file-formats: $font-supported-formats );
  @include font-face( $font-victoria, "#{$font-path-victoria}-Extrabold", $weight-extrabold, $file-formats: $font-supported-formats );





  /* ===== CUSTOM NORMALISATION ============================================= */

  q {
    &:before,
    &:after
    {
      content: '';
    }
  }





  /* ===== BASE TYPOGRAPHY ================================================== */


  html {
    font-size: $base-size; //84em * 14px = 1176px

    //TODO: Make major media queries more variable

    //include-media.com/#features
    @import 'include-media/dist/_include-media.scss'; // TODO: Relocate?

    @include media(">=1366px") { //84em * 16px = 1344px
      font-size: 16px;
    }
    @include media(">=1536px") { //84em * 18px = 1512px
      // font-size: 18px;
    }
  }

  body {
    font-family: $base-body-family;
    line-height: $base-line-height;
    color:       $base-font-color;
    -webkit-font-smoothing: antialiased;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    font-family: $base-heading-family;
    font-weight: $weight-semibold;
    color:       $base-heading-color;
  }

  h1 {
    font-size: scale-heading( 5 );
    line-height: #{$base-line-height * 2}rem;
    margin-bottom: #{$base-line-height * 1 - 0.5}rem;

    &.hero { font-size: scale-font( 5 ); } // TODO: Relocate?
  }

  h2 {
    font-size: scale-heading( 4 );
    line-height: #{$base-line-height * 1.5}rem;
    margin-bottom: #{$base-line-height * 1 - 0.5}rem;
  }

  h3 {
    font-size: scale-heading( 3 );
    line-height: #{$base-line-height * 1.5}rem;
    margin-bottom: #{$base-line-height * 1 - 0.5}rem;
  }

  h4 {
    font-size: scale-heading( 2 );
    line-height: #{$base-line-height * 1}rem;
    margin-bottom: #{$base-line-height * 1}rem;
  }

  h5 {
    font-size: scale-heading( 1 );
    line-height: #{$base-line-height * 1}rem;
    margin-bottom: #{$base-line-height * 1}rem;
  }

  h6 {
    font-size: scale-heading( -1 );
    line-height: #{$base-line-height * 1}rem;
    margin-bottom: #{$base-line-height * 1}rem;
  }

  p {
    line-height: #{$base-line-height * 1}rem;
    margin-bottom: #{$base-line-height * 1}rem;
  }


  /** Lists */

  ul,
  li {
    li & { margin-left: $default-spacing; }

    margin-bottom: $default-spacing;
  }

  // TODO: Refactor! Does *not* match the graphic design!
  ul {
    list-style: square;
  }

  ol {
    list-style: decimal;
  }


  /** Links */

  %vuw-link {
    display:        inline;
    border-bottom:  1px solid;
    padding-bottom: .08em;    // TODO: Is it necessary? Why?
    margin-bottom:  -.08em;   // TODO: Is it necessary? Why?
    border-bottom:  1px solid transparentize( $color-links, .7 );

    &:hover {
      opacity: .8;
      border-bottom-color: $color-links;
    }
  }

  a[href] {
    color: $base-link-color;
    text-decoration: none;
  }

  p,
  ul,
  ol,
  table {
    a { @extend %vuw-link; }
  }


  /** Tables */
  $table-border-color:    $grey-alto;
  $table-head-background: $green-nebula;

  table {
    margin-bottom: $default-spacing;
    box-shadow: 0 1px 5px rgba( #000,.15 );
    border-collapse: collapse;
    border-spacing: 0;

    // TODO: Relocate?
    &.bleed {
      @include media( $desktop ){
          margin-left:  -25%;
          margin-right: -25%;
      }
    }
  }

    th,
    td {
      padding: $default-spacing / 2;
      vertical-align: baseline;
      text-align: left;

      p { margin-bottom: 0; }
    }

    th { background-color: table-head-background; }
    td { border-bottom: 1px solid $table-border-color; }


  /** Imagery */

  p > img {
    float: left;
    margin: 0 $default-spacing $default-spacing 0;

    & ~ img {
      float: right;
      margin: 0 0 $default-spacing $default-spacing;
    }
  }


  /** Miscs */

  time { color: $gray; }


  // TODO: Relocate?
  /** Development helpers *ONLY* - !DO NOT USE IN PRODUCTION! */

  body.show-grid {
    background-image:  linear-gradient(to bottom,#0FF 0,rgba( #FFF,0 )1px);
    background-repeat: repeat-y;
    background-size:   100% $base-font-size * $base-line-height;
  }
